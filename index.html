<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cotizador de Entidades BIM</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="icon" type="image/x-icon" href="assets/nabe.ico">
  <meta name="theme-color" content="#2f5d4a">
</head>
<body>

  <!-- Bot√≥n flotante para abrir historial en m√≥vil -->
  <button id="toggleHistorial" class="toggle-historial" aria-label="Ver historial">
    <span class="historial-count" id="contadorHistorial">0</span>
    üìã
  </button>

  <!-- Panel de Historial -->
  <div id="panelHistorial" class="panel-historial">
    <div class="panel-header">
      <h3>Historial</h3>
      <button id="cerrarHistorial" class="cerrar-historial" aria-label="Cerrar historial">‚úï</button>
    </div>
    <ul id="listaHistorial"></ul>
    <div class="total-acumulado">
      Total: <strong id="totalAcumulado">$ 0</strong>
    </div>
  </div>

  <!-- Overlay para cerrar el panel al hacer clic fuera -->
  <div id="overlay" class="overlay"></div>

  <form id="cotizadorForm">
    <h1><img src="assets/nabe.png" alt="Logo NABE" class="logo-titulo"> Cotizador de Creaci√≥n de Entidades</h1>
    <p>Complete el formulario para cotizar entidades BIM.</p>
    
    <!-- ID -->
    <label>Nombre del cliente *</label>
    <input type="text" name="cliente_id" required>

    <!-- P1 -->
    <div class="campo-con-ayuda">
      <label>1. Identificador de la entidad *</label>
      <button type="button" class="btn-ayuda" data-ayuda="identificador">?</button>
    </div>
    <div id="ayuda-identificador" class="ayuda-texto" style="display:none;">
      Ingrese un nombre √∫nico para identificar la entidad BIM (ej: "Silla Oficina Modelo A", "Lavamanos Tipo B").
    </div>
    <input type="text" name="identificador" required>

    <!-- P2 -->
    <div class="campo-con-ayuda">
      <label>2. ¬øLa entidad es nativa de Revit?</label>
      <button type="button" class="btn-ayuda" data-ayuda="software">?</button>
    </div>
    <div id="ayuda-software" class="ayuda-texto" style="display:none;">
      <strong>Nativa de Revit:</strong> La entidad se puede crear completamente dentro de Revit.<br>
      <strong>Software externo:</strong> Requiere modelado en programas como SketchUp, Rhino, 3ds Max, etc.
    </div>
    <select name="software" id="software" required>
      <option value="">Seleccione</option>
      <option value="nativo">Entidad nativa de Revit</option>
      <option value="externo">Necesita software externo</option>
    </select>

    <!-- P3 -->
    <div class="campo-con-ayuda">
      <label>3. ¬øLa entidad debe ser param√©trica?</label>
      <button type="button" class="btn-ayuda" data-ayuda="parametrica">?</button>
    </div>
    <div id="ayuda-parametrica" class="ayuda-texto" style="display:none;">
      <strong>No:</strong> Modelo fijo sin opciones de modificaci√≥n.<br>
      <strong>Par√°metros b√°sicos:</strong> Dimensiones editables (alto, ancho, largo).<br>
      <strong>Par√°metros complejos:</strong> Opciones avanzadas (materiales, configuraciones, elementos opcionales).
    </div>
    <select name="parametrica" id="parametrica">
      <option value="no">No</option>
      <option value="basica">Par√°metros b√°sicos</option>
      <option value="compleja">Par√°metros complejos</option>
    </select>

    <!-- P4 -->
    <div class="campo-con-ayuda">
      <label>4. Categor√≠a</label>
      <button type="button" class="btn-ayuda" data-ayuda="categoria">?</button>
    </div>
    <div id="ayuda-categoria" class="ayuda-texto" style="display:none;">
      Seleccione la categor√≠a BIM m√°s apropiada para esta entidad. Esto determina c√≥mo Revit clasifica y gestiona el elemento.
    </div>
    <select name="categoria">
      <option>Mobiliario</option>
      <option>Mueble de obra</option>
      <option>Aparato el√©ctrico</option>
      <option>Aparato sanitario</option>
      <option>Luminaria</option>
      <option>Puerta</option>
      <option>Ventana</option>
      <option>General</option>
    </select>

    <!-- P5 -->
    <div class="campo-con-ayuda">
      <label>5. Nivel de detalle (LOD)</label>
      <button type="button" class="btn-ayuda" data-ayuda="lod">?</button>
    </div>
    <div id="ayuda-lod" class="ayuda-texto" style="display:none;">
      <strong>LOD 100:</strong> Representaci√≥n conceptual b√°sica.<br>
      <strong>LOD 200:</strong> Geometr√≠a aproximada con informaci√≥n general.<br>
      <strong>LOD 300:</strong> Geometr√≠a precisa con detalles espec√≠ficos.<br>
      <strong>LOD 400:</strong> Modelo detallado para fabricaci√≥n/construcci√≥n.
    </div>
    <select name="lod" id="lod">
      <option>LOD 100</option>
      <option>LOD 200</option>
      <option>LOD 300</option>
      <option>LOD 400</option>
    </select>

    <!-- P6 -->
    <div class="campo-con-ayuda">
      <label>6. ¬øRequiere simbolog√≠a 2D adicional?</label>
      <button type="button" class="btn-ayuda" data-ayuda="simbolo2d">?</button>
    </div>
    <div id="ayuda-simbolo2d" class="ayuda-texto" style="display:none;">
      Indica si necesita representaciones esquem√°ticas 2D personalizadas para plantas, cortes o diagramas (diferente a la vista 3D proyectada).
    </div>
    <select name="simbolo2d">
      <option>No</option>
      <option>S√≠</option>
    </select>

    <!-- P7 -->
    <div class="campo-con-ayuda">
      <label>7. ¬øTiene conexiones MEP?</label>
      <button type="button" class="btn-ayuda" data-ayuda="mep">?</button>
    </div>
    <div id="ayuda-mep" class="ayuda-texto" style="display:none;">
      Indica si la entidad necesita conectores para sistemas MEP (mec√°nicos, el√©ctricos o de plomer√≠a) como tomas de agua, electricidad, ventilaci√≥n, etc.
    </div>
    <select name="mep">
      <option>No</option>
      <option>S√≠</option>
    </select>

    <!-- P8 -->
    <div class="campo-con-ayuda">
      <label>8. ¬øRequiere configuraci√≥n de tipos?</label>
      <button type="button" class="btn-ayuda" data-ayuda="tipos">?</button>
    </div>
    <div id="ayuda-tipos" class="ayuda-texto" style="display:none;">
      Indica si se necesitan m√∫ltiples variantes predefinidas de la misma familia (ej: mismo modelo en diferentes tama√±os o acabados).
    </div>
    <select name="tipos" id="tipos">
      <option>No</option>
      <option>S√≠</option>
    </select>

    <!-- P9 -->
    <div class="campo-con-ayuda">
      <label>9. Cantidad de entidades</label>
      <button type="button" class="btn-ayuda" data-ayuda="cantidad">?</button>
    </div>
    <div id="ayuda-cantidad" class="ayuda-texto" style="display:none;">
      N√∫mero de unidades de esta misma entidad que desea cotizar.
    </div>
    <input type="number" name="cantidad" min="1" value="1">

    <label>Total estimado</label>
    <input type="text" id="totalCotizacion" readonly>

    <button type="submit">Enviar cotizaci√≥n</button>
  </form>

  <div id="postEnvio" style="display:none; text-align:center;">
    <h2>Cotizaci√≥n enviada</h2>
    <p>¬øDeseas agregar otra entidad o finalizar?</p>

    <div class="post-buttons">
      <button type="button" id="otraEntidad">Agregar otra entidad</button>
      <button type="button" id="finalizar">Finalizar</button>
    </div>
  </div>

  <div id="mensajeFinal" style="display:none; text-align:center;">
    <h2>¬°Gracias!</h2>
    <p>Hemos recibido tu solicitud de cotizaci√≥n.<br>
    Nos pondremos en contacto contigo pronto.</p>
  </div>

  <script src="script.js"></script>
</body>
</html>